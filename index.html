<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mora for Studying</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        /* --- الإعدادات الأساسية والثيمات --- */
        :root {
            --transition-speed: 0.5s;
        }
        
        body {
            --accent-color: #00ff7f; 
            --accent-glow: rgba(0, 255, 127, 0.4); 
            --accent-hover: #33ff99;
            --primary-bg: #05080f; --secondary-bg: #10141f; --glass-bg: rgba(16, 20, 31, 0.75); --primary-text-color: #e1e1ff; --border-color: rgba(0, 255, 127, 0.25);
        }
        body.mode-light { --primary-bg: #f0f2f5; --secondary-bg: #ffffff; --glass-bg: rgba(255, 255, 255, 0.85); --primary-text-color: #1c1e21; --border-color: rgba(0,0,0, 0.2); }
        body.mode-oled { --primary-bg: #000000; --secondary-bg: #111111; --glass-bg: rgba(17, 17, 17, 0.75); --primary-text-color: #e1e1ff; --border-color: rgba(0, 255, 127, 0.25); }
        body.mode-gold-black { --primary-bg: #000000; --secondary-bg: #1a1a1a; --glass-bg: rgba(26, 26, 26, 0.75); --primary-text-color: #f0e6d2; --border-color: rgba(212, 175, 55, 0.3); --accent-color: #d4af37; --accent-glow: rgba(212, 175, 55, 0.4); --accent-hover: #b89b31; }
        
        /* --- التنسيقات العامة --- */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Cairo', sans-serif; }
        html { scroll-behavior: smooth; }
        body { background-color: var(--primary-bg); color: var(--primary-text-color); transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease; min-height: 100vh; overflow: hidden; }
        
        /* --- خلفية متحركة --- */
        .animated-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; overflow: hidden; background: var(--primary-bg); }
        #login-animation-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .glow-element { position: absolute; border-radius: 50%; filter: blur(150px); z-index: -2; }
        #glow1 { width: 400px; height: 400px; background: var(--accent-color); top: 10%; left: 10%; opacity: 0.3; }
        #glow2 { width: 300px; height: 300px; background: var(--accent-hover); bottom: 5%; right: 5%; opacity: 0.4; }
        
        /* --- نظام الصفحات (تسجيل دخول، تحميل، رئيسية) --- */
        .page { display: flex; flex-direction: column; align-items: center; justify-content: center; position: absolute; top:0; left:0; width:100%; height:100%; transition: opacity 0.7s ease, transform 0.7s ease; opacity: 0; pointer-events: none; z-index: 2; }
        .page.active { opacity: 1; pointer-events: auto; }
        .page.exit { opacity: 0; transform: none; }
        
        #login-page { gap: 20px; padding: 20px; overflow-y: auto; } 
        #main-page { padding-top: 0; justify-content: flex-start; }

        /* --- شاشة التحميل --- */
        #loading-page .loading-text { font-size: 1.6rem; font-weight: 700; color: var(--primary-text-color); margin-bottom: 30px; text-shadow: 0 0 10px var(--accent-glow); animation: subtleGlow 2.5s infinite alternate ease-in-out; padding: 0 15px; text-align: center; }
        @keyframes subtleGlow { from { opacity: 0.7; transform: scale(1); } to { opacity: 1; transform: scale(1.02); } }
        #loading-page::after { content: '...جاري التحميل'; font-size: 1rem; color: var(--primary-text-color); opacity: 0.8; margin-top: 20px; }
        #loading-page .loading-bar-container { width: 80%; max-width: 350px; height: 10px; background-color: var(--border-color); border-radius: 5px; overflow: hidden; box-shadow: 0 0 15px var(--accent-glow); }
        #loading-page .loading-bar { width: 100%; height: 100%; background: linear-gradient(90deg, transparent, var(--accent-color), transparent); background-size: 200% 100%; border-radius: 5px; animation: loading-progress 1.8s linear infinite; }
        @keyframes loading-progress { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
        
        /* --- واجهة تسجيل الدخول --- */
        .login-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        .login-header img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover; 
            border: 3px solid var(--border-color);
            padding: 5px;
            box-shadow: 0 0 15px var(--accent-glow), 0 0 30px var(--accent-color), 0 0 50px var(--accent-glow), inset 0 0 10px rgba(0,0,0,0.5);
            animation: float-logo 5s ease-in-out infinite;
        }
        @keyframes float-logo {
            0% { transform: translateY(0px) rotate(-2deg) scale(1); }
            50% { transform: translateY(-20px) rotate(2deg) scale(1.05); }
            100% { transform: translateY(0px) rotate(-2deg) scale(1); }
        }
        .login-header .welcome-text {
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            color: var(--accent-color);
            text-shadow: 0 0 10px var(--accent-glow);
            letter-spacing: 2px;
            opacity: 0.9;
        }

        /* حاويات الدخول الشفافة */
        .auth-choice-container, .auth-view {
            background: transparent;
            padding: 15px;
            width: 100%;
            max-width: 300px;
            display: none;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        .auth-view { gap: 20px; animation: fadeInContent 0.8s backwards; max-width: 350px; }
        .auth-choice-container { gap: 20px; justify-content: center; }
        .auth-view.active, .auth-choice-container.active { display: flex; }

        /* تحسين أنيميشن ظهور صفحة الدخول */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(25px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .auth-choice-container.active .login-header { animation: fadeInUp 0.7s 0.1s backwards; }
        .auth-choice-container.active #create-account-choice-btn { animation: fadeInUp 0.7s 0.3s backwards; }
        .auth-choice-container.active #login-choice-btn { animation: fadeInUp 0.7s 0.5s backwards; }
        
        /* تعديل تصميم شاشة إنشاء الحساب */
        #create-account-view { max-width: 340px; }
        #create-account-form { gap: 18px; }
        #create-account-view .auth-title { margin-bottom: 15px; margin-top: 5px; }

        /* --- تصميم الأزرار الشفاف والمضيء --- */
        .auth-btn {
            position: relative;
            width: 100%;
            padding: 10px 18px; 
            font-size: 1.1rem;
            border: 1.5px solid var(--accent-color);
            color: #fff;
            text-shadow: 0 0 4px #fff, 0 0 10px var(--accent-color), 0 0 18px var(--accent-glow);
            background: transparent;
            border-radius: 8px;
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
            letter-spacing: 1px;
            cursor: pointer;
            box-shadow: 0 0 18px -2px var(--accent-glow);
            transition: all 0.4s ease;
        }
        .auth-btn:hover {
            border-color: var(--accent-hover);
            box-shadow: 0 0 25px var(--accent-color), 0 0 8px var(--accent-glow) inset;
            transform: scale(1.03) translateY(-2px);
            text-shadow: 0 0 5px #fff, 0 0 12px var(--accent-hover), 0 0 22px var(--accent-glow);
        }

        /* زر الرجوع */
        .back-to-choice-btn {
            position: absolute;
            top: 10px; right: 10px;
            background: transparent; border: none;
            color: var(--primary-text-color); font-size: 1.5rem; cursor: pointer;
            opacity: 0.7; transition: all 0.3s ease;
            padding: 5px 10px; z-index: 5;
        }
        [dir="ltr"] .back-to-choice-btn { right: auto; left: 10px; }
        .back-to-choice-btn:hover { opacity: 1; color: var(--accent-color); transform: scale(1.1); }
        
        .auth-form { width: 100%; display: flex; flex-direction: column; gap: 20px; }
        .auth-title { font-family: 'Orbitron', sans-serif; font-size: 2rem; font-weight:900; text-align: center; color: var(--primary-text-color); margin-bottom: 20px; margin-top:10px; text-shadow: 0 0 15px var(--accent-glow); }
        
        @keyframes fadeInContent { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .input-group { position: relative; }
        .input-group label { position: absolute; top: 12px; right: 5px; color: var(--primary-text-color); opacity: 0.7; pointer-events: none; transition: all 0.3s ease; }
        [dir=ltr] .input-group label { right: auto; left: 5px; }
        .input-group input, .input-group select { width:100%; padding: 12px 5px; background: transparent; border: none; border-bottom: 2px solid var(--border-color); color: var(--primary-text-color); font-size: 1rem; transition: border-color 0.3s ease; }
        .input-group input[readonly] { color: #aaa; cursor: not-allowed; }
        .input-group input:-webkit-autofill, .input-group input:-webkit-autofill:hover, .input-group input:-webkit-autofill:focus, .input-group input:-webkit-autofill:active { -webkit-text-fill-color: var(--primary-text-color) !important; -webkit-box-shadow: 0 0 0 30px var(--primary-bg) inset !important; background-color: transparent !important; }
        .input-group input:focus + label, .input-group input:not(:placeholder-shown) + label, .input-group input[readonly] + label { top: -14px; font-size: 0.8rem; opacity: 1; color: var(--accent-color); }
        .input-group input:focus, .input-group select:focus { outline: none; border-bottom-color: var(--accent-color); box-shadow: 0 5px 15px -5px var(--accent-glow); }
        .input-group input::placeholder { color: transparent; }

        .password-wrapper { position: relative; display: flex; align-items: center; }
        .password-wrapper input { padding-left: 40px; }
        [dir=ltr] .password-wrapper input { padding-left: 5px; padding-right: 40px; }
        .password-toggle { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; color: var(--primary-text-color); opacity: 0.7; }
        [dir=ltr] .password-toggle { left: auto; right: 10px; }
        .password-toggle:hover { opacity: 1; color: var(--accent-color); }
        
        /* تصميم اقتراح كلمة المرور */
        #password-suggestion-container { position: relative; height: 0; margin-top: 5px; }
        #password-suggestion {
            position: absolute;
            bottom: 0;
            right: 0; left: 0;
            text-align: center;
            background: var(--glass-bg);
            padding: 8px;
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            border: 1px solid var(--border-color);
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            pointer-events: none;
            z-index: 10;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        #password-suggestion.show { opacity: 1; transform: translateY(0); pointer-events: auto; }
        #password-suggestion:hover { border-color: var(--accent-color); }
        #password-suggestion .password-value {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent-color);
            margin: 0 5px;
            direction: ltr; /* Ensure password appears correctly */
            display: inline-block;
        }

        .password-hint { font-size: 0.8rem; text-align: center; color: var(--primary-text-color); opacity: 0.7; margin-top: -15px; }
        .input-group select { color: var(--primary-text-color); opacity: 0.7; }
        .input-group select:valid { opacity: 1; }
        .input-group select option { background-color: var(--secondary-bg); color: var(--primary-text-color); }
        .input-group select option[value=""][disabled] { display: none; }
        .input-group select { background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23e1e1ff' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M11 13L5 8l6-5'/%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: left .75rem center; background-size: 12px; -webkit-appearance: none; appearance: none; padding-right: 35px; }
        [dir=ltr] .input-group select { background-position: right .75rem center; padding-right: 5px; padding-left: 35px; }
        
        /* زر تسجيل شفاف ومشع بدون إطار --- بتصميم مستقبلي */
        .submit-btn {
            width: 100%;
            padding: 14px 20px;
            background: transparent;
            border: none;
            color: var(--accent-color);
            border-radius: 8px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.4rem;
            font-weight: 900;
            letter-spacing: 3px;
            cursor: pointer;
            transition: all .4s ease;
            text-transform: uppercase;
            text-shadow: 0 0 8px var(--accent-color), 0 0 20px var(--accent-glow), 0 0 35px var(--accent-glow);
            margin-top: 10px;
            box-shadow: 0 0 20px -5px var(--accent-glow);
            position: relative;
            overflow: hidden;
        }
        .submit-btn:hover:not(:disabled) {
            transform: translateY(-3px) scale(1.02);
            text-shadow: 0 0 12px var(--accent-color), 0 0 30px var(--accent-color), 0 0 50px var(--accent-glow);
            box-shadow: 0 0 30px var(--accent-glow);
        }
        .submit-btn:disabled { color: #888; cursor: not-allowed; opacity: .6; transform: none; text-shadow: none; background: transparent; box-shadow: none; border-color: #888;}
        #semester-warning { color: var(--accent-hover); text-align: center; height: 20px; font-weight: 600; font-size: .8rem; margin-top: -10px; }

        .captcha-container-numeric { display: flex; align-items: center; gap: 8px; }
        #captcha-canvas { border: none; border-radius: 5px; background-color: rgba(255, 255, 255, 0.05); flex-shrink: 0; }
        #captcha-refresh-btn { background: transparent; border: none; color: var(--primary-text-color); font-size: 1.3rem; cursor: pointer; transition: all 0.3s ease; padding: 5px; }
        #captcha-refresh-btn:hover { color: var(--accent-color); transform: rotate(180deg); }
        .captcha-container-numeric .input-group { flex-grow: 1; flex-basis: auto; animation: none; margin-top: 0; transform: none; }
        .captcha-container-numeric .input-group input { text-align: center; letter-spacing: 3px; }
        
        #auth-message { 
            position: fixed; top: 50%; left: 50%; 
            transform: translate(-50%, -50%); 
            background: var(--glass-bg); padding: 20px 30px; 
            border-radius: 10px; z-index: 1001; 
            text-align: center; font-size: 1.1rem; font-weight: 600; 
            backdrop-filter: blur(5px); display: none; 
            animation: fadeInCenter 0.5s; 
        }
        @keyframes fadeInCenter {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        /* --- تنسيقات البانر المتحرك --- */
        .scrolling-banner { 
            width: 100%; 
            background-color: var(--glass-bg); 
            backdrop-filter: blur(5px); 
            -webkit-backdrop-filter: blur(5px); 
            padding: 4px 0; 
            overflow: hidden; 
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.8s ease 0.5s;
        }
        #main-page.active .scrolling-banner {
            opacity: 1;
        }
        .scrolling-banner p { 
            display: inline-block; 
            font-size: 0.8rem; 
            font-weight: 600; 
            background: linear-gradient(90deg, var(--accent-hover), #e1e1ff, var(--accent-hover)); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            background-clip: text; 
            text-fill-color: transparent; 
        }
        /* تحريك البانر فقط عند تفعيل الصفحة الرئيسية */
        #main-page.active .scrolling-banner p {
            animation: scroll-continuous 40s linear infinite;
        }
        [dir="rtl"] .scrolling-banner p, [dir="ltr"] .scrolling-banner p { padding-left: 100%; }
        @keyframes scroll-continuous { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
        
        #main-header { width: 100%; max-width: 900px; padding: 15px 20px 25px 20px; display: flex; justify-content: space-between; align-items: center; text-align: right; }
        [dir="ltr"] #main-header { text-align: left; }
        #main-header { animation: fadeInContent 0.8s 0.2s backwards; transition: opacity 0.4s ease; }
        #app-logo { width: 50px; height: 50px; border-radius: 50%; box-shadow: 0 0 15px var(--accent-glow);  object-fit: cover; flex-shrink: 0;}
        .header-content { flex-grow: 1; padding: 0 15px; }
        #welcome-message-name { font-size: 1.2rem; font-weight: 700; }
        #welcome-message-details { font-size: 0.9rem; font-weight: 400; opacity: 0.8; margin-top: 2px; }
        #points-counter { display: flex; align-items: center; gap: 8px; background: var(--glass-bg); padding: 5px 12px; border-radius: 50px; border: 1px solid var(--border-color); font-family: 'Orbitron', sans-serif; flex-shrink: 0; cursor: pointer; transition: transform 0.3s ease; }
        #points-counter:hover { transform: scale(1.05); }
        #points-counter .fa-star { color: #FFD700; text-shadow: 0 0 8px rgba(255, 215, 0, 0.7); }
        #points-display { font-weight: 700; font-size: 1.1rem; color: var(--primary-text-color); }
        #view-wrapper { flex-grow: 1; position: relative; width: 100%; max-width: 900px; }
        #courses-container, #details-view { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow-y: auto; padding: 20px 20px 140px 20px; overscroll-behavior: contain; }
        #courses-container { display: flex; flex-direction: column; align-items: center; gap: 15px; }
        .course-card { opacity: 0; /* يبدأ شفافًا للتحريك */ width: 100%; max-width: 280px; background: var(--secondary-bg); padding: 15px;  border-radius: 12px; border: 1px solid var(--border-color); cursor: pointer; animation: fadeIn 0.8s forwards; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px; transition: border-color 0.2s ease, transform 0.2s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .course-card:hover { border-color: var(--accent-color); transform: translateY(-3px); }
        .course-card i { font-size: 1.8rem; color: var(--accent-color); margin-bottom: 5px; }
        .course-card h3 { font-size: 1.1rem; color: var(--primary-text-color); font-weight: 600; text-align: center; }
        #details-view { display: flex; flex-direction: column; }
        #details-header { display: flex; align-items: center; gap: 15px; padding-bottom: 20px; border-bottom: 1px solid var(--border-color); margin-bottom: 20px; flex-shrink: 0; }
        #back-to-courses-btn { background: transparent; border: 2px solid var(--border-color); color: var(--primary-text-color); width: 40px; height: 40px; border-radius: 50%; font-size: 1.2rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; }
        #back-to-courses-btn:hover { border-color: var(--accent-color); color: var(--accent-color); }
        [dir="rtl"] #back-to-courses-btn i { transform: scaleX(-1); }
        #details-view-title { font-size: 1.5rem; font-weight: 700; }
        #details-view-list { display: flex; flex-direction: column; gap: 15px; }
        .detail-item { display: flex; align-items: center; justify-content: space-between; background: var(--secondary-bg); padding: 15px; border-radius: 10px; border: 1px solid var(--border-color); cursor: pointer; transition: all 0.2s ease; }
        .detail-item:hover { background: var(--primary-bg); border-color: var(--accent-color); }
        .detail-item span { font-size: 1.1rem; font-weight: 600; flex-grow: 1; text-align: right; }
        .detail-item .lock-icon { font-size: 1.4rem; color: var(--accent-color); margin-right: 15px; transition: transform 0.3s ease; }
        .detail-item.unlocked .lock-icon { color: #28a745; }
        @keyframes jiggle-3d-lock { 0%, 100% { transform: rotateY(0) rotateX(0); } 25% { transform: rotateY(-20deg) rotateX(10deg); } 50% { transform: rotateY(20deg) rotateX(-10deg); } 75% { transform: rotateY(-15deg); } }
        .detail-item.locked .lock-icon { animation: jiggle-3d-lock 2.5s infinite ease-in-out; text-shadow: 0 0 8px var(--accent-glow); }
        #courses-container, #details-view { transition: opacity 0.4s ease, transform 0.4s ease; }
        #details-view { opacity: 0; transform: translateY(30px); pointer-events: none; }
        #main-page.details-active #courses-container { opacity: 0; transform: translateY(-30px); pointer-events: none; }
        #main-page.details-active #details-view { opacity: 1; transform: translateY(0); pointer-events: auto; }
        
        #bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; z-index: 100; padding: 10px 0; background: var(--glass-bg); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-top: 1px solid var(--border-color); }
        .nav-group { display: flex; justify-content: space-around; align-items: center; max-width: 500px; margin: 0 auto; }
        .nav-item { cursor:pointer; display:flex; flex-direction:column; align-items:center; color:var(--primary-text-color); transition:all 0.3s ease; background: none; border: none; padding: 5px; position: relative; text-decoration: none; flex: 1; }
        .nav-item i { font-size: 1.2rem; margin-bottom: 4px; transition: color 0.2s ease, transform 0.2s ease; } 
        #courses-btn.locked .fa-lock { animation: jiggle-lock 2s infinite ease-in-out; }
        @keyframes jiggle-lock { 0%, 100% { transform: rotate(0); } 20% { transform: rotate(-8deg); } 40% { transform: rotate(8deg); } 60% { transform: rotate(-5deg); } 80% { transform: rotate(5deg); } }
        .nav-item span { font-size: 0.7rem; white-space: nowrap; }
        .nav-item:hover { color:var(--accent-hover); }
        .nav-item:active i { color: var(--accent-color); }
        .nav-item.highlight-nav-item { animation: highlight-pulse 1.5s infinite; border-radius: 8px; }
        @keyframes highlight-pulse { 0% { box-shadow: 0 0 0 0 var(--accent-glow); } 70% { box-shadow: 0 0 15px 10px rgba(0,0,0,0); } 100% { box-shadow: 0 0 0 0 rgba(0,0,0,0); } }
        .modal-overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); backdrop-filter:blur(8px); -webkit-backdrop-filter:blur(8px); z-index:1000; display:flex; justify-content:center; align-items:center; opacity:0; pointer-events:none; transition:opacity 0.4s ease; padding: 15px; }
        .modal-overlay.active { opacity:1; pointer-events:auto; }
        .modal-content { background:var(--secondary-bg); padding:30px; border-radius:12px; box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37); width:100%; max-width:550px; position:relative; border: 1px solid var(--border-color); transform:scale(0.9); transition:transform 0.4s ease; max-height: 85vh; overflow-y: auto; }
        .modal-overlay.active .modal-content { transform:scale(1); }
        .close-btn { position:absolute; top:15px; right:15px; background:none; border:none; color:var(--primary-text-color); font-size:1.8rem; cursor:pointer; transition:all 0.3s ease; text-shadow: 0 0 5px #000; z-index: 1001;}
        .close-btn:hover { color: var(--accent-color); transform: rotate(90deg); }
        .modal-overlay.full-screen { flex-direction: column; gap: 8px; overflow-y: auto; padding: 60px 15px 30px 15px; justify-content: flex-start; }
        .full-screen > .modal-content { background: transparent; border: none; box-shadow: none; }
        .full-screen > * { animation: fadeInContent 0.6s 0.2s backwards; }
        .full-screen .close-btn { top: 25px; right: 25px; }
        .full-screen h3 { font-size: 1.6rem; text-shadow: 0 0 10px var(--accent-glow); text-align: center; }
        .full-screen p { font-size: 1rem; opacity: 0.9; max-width: 500px; text-align: center; }
        #about-modal .modal-content { display: flex; flex-direction: column; align-items: center; }
        #about-modal .modal-content > h3 { order: 1; }
        #about-modal .modal-content > .institute-name { order: 2; }
        #about-modal .modal-content > .dev-credit { order: 3; }
        #about-modal .modal-content > .social-icons { order: 4; margin-top: 15px; }
        #about-modal .modal-content > .app-version { order: 5; margin-top: 25px; }
        #about-modal .modal-content > .sponsors-title { order: 6; margin-top: 25px; }
        #about-modal .modal-content > .sponsors-list { order: 7; }
        #about-modal .modal-content > .modal-actions-list { order: 8; }
        #about-modal.full-screen .social-icons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin: 20px 0;
        }
        #about-modal.full-screen .social-icons a { color: var(--primary-text-color); font-size: 1.9rem; transition: color 0.3s ease, transform 0.3s ease; }
        #about-modal.full-screen .social-icons a:hover { color: var(--accent-color); transform: scale(1.1) translateY(-5px); }
        .dev-credit { font-family: 'Orbitron', sans-serif; font-size: 1.1rem; opacity: 0.9; text-shadow: 0 0 6px var(--accent-glow); }
        .institute-name { font-weight: 600; white-space: nowrap; }
        .app-version { font-family: 'Orbitron', sans-serif; font-size: 0.8rem; opacity: 0.9; background: var(--glass-bg); border: 1px solid var(--border-color); padding: 4px 12px; border-radius: 50px; display: inline-block; }
        .modal-actions-list { display: flex; flex-direction: column; gap: 15px; width: 100%; max-width: 300px; margin-top: 30px; align-items: center; }
        .modal-action-btn { display: flex; align-items: center; justify-content: center; gap: 12px; width: 100%; max-width: 260px; padding: 10px 20px; font-size: 0.95rem; font-weight: 600; border-radius: 10px; cursor: pointer; transition: all 0.3s ease; background: rgba(255, 255, 255, 0.05); border: none; text-shadow: 0 0 5px rgba(0,0,0,0.5); }
        .modal-action-btn:hover { transform: translateY(-4px) scale(1.03); background: rgba(255, 255, 255, 0.1); }
        .modal-action-btn i { color: inherit !important; }
        #rate-app-btn { color: var(--accent-color); }
        #blog-btn { color: #c37cff; }
        #privacy-policy-btn { color: #49e3c0; }
        #timer-btn { color: #f37b12; }
        #logout-btn, #clear-data-btn { color: #ff4d4d; }
        #rate-app-btn:hover { text-shadow: 0 0 10px var(--accent-glow); }
        #blog-btn:hover { text-shadow: 0 0 10px rgba(195, 124, 255, 0.6); }
        #privacy-policy-btn:hover { text-shadow: 0 0 10px rgba(73, 227, 192, 0.6); }
        #timer-btn:hover { text-shadow: 0 0 10px rgba(243, 123, 18, 0.6); }
        #logout-btn:hover, #clear-data-btn:hover { text-shadow: 0 0 10px rgba(255, 77, 77, 0.6); }
        .sponsors-title { font-size: 1.2rem; font-weight: 700; color: var(--accent-color); margin-bottom: 15px; margin-top: 15px; text-shadow: 0 0 8px var(--accent-glow); }
        .sponsors-list { list-style: none; padding: 0; margin: 0 0 20px 0; line-height: 1.8; font-size: 1.1rem; text-align: center; }
        .glowing-sponsors li { font-weight: 600; color: #fff; padding-bottom: 10px; margin-bottom: 10px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); animation: pulse-glow 3s infinite alternate, fadeInSponsor 0.6s backwards; transition: transform 0.3s ease, text-shadow 0.3s ease; }
        .glowing-sponsors li:last-child { border-bottom: none; margin-bottom: 0; }
        .glowing-sponsors li:hover { transform: scale(1.05); text-shadow: 0 0 10px #fff, 0 0 20px var(--accent-color), 0 0 35px var(--accent-color); }
        .glowing-sponsors.animate li:nth-child(1) { animation-delay: 0.5s; }
        .glowing-sponsors.animate li:nth-child(2) { animation-delay: 0.7s; }
        .glowing-sponsors.animate li:nth-child(3) { animation-delay: 0.9s; }
        @keyframes fadeInSponsor { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes pulse-glow { from { text-shadow: 0 0 4px #fff, 0 0 8px var(--accent-glow), 0 0 12px var(--accent-glow); } to { text-shadow: 0 0 8px #fff, 0 0 16px var(--accent-color), 0 0 24px var(--accent-color); } }
        #ai-modal.full-screen .ai-container, #platform-links-modal.full-screen .ai-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 12px; width: 100%; max-width: 900px; padding: 20px 5px; }
        .ai-btn { display: flex; align-items: center; justify-content: center; padding: 12px 8px; background: rgba(255, 255, 255, 0.08); border: 1px solid var(--border-color); color: var(--primary-text-color); text-align: center; text-decoration: none; border-radius: 10px; font-size: 0.9rem; font-weight: 600; transition: all 0.3s ease; min-height: 60px; }
        .ai-btn:hover { border-color: var(--accent-color); background: rgba(0,0,0, 0.2); transform: translateY(-3px); color: var(--accent-color); }
        #redirect-modal.full-screen { gap: 10px; text-align: center; justify-content: center; }
        #redirect-modal .dev-text { font-size: 1rem; opacity: 0.8; }
        #redirect-modal .redirect-message { font-size: 1.5rem; font-weight: 600; }
        #redirect-modal #redirect-timer { font-family: 'Orbitron', sans-serif; font-size: 4rem; font-weight: 700; color: var(--accent-color); text-shadow: 0 0 20px var(--accent-glow); animation: timerPulse 1s infinite; }
        @keyframes timerPulse { 50% { transform: scale(1.1); } }
        #settings-modal .modal-content { background: transparent; box-shadow: none; border: none; }
        .settings-section { margin-bottom: 25px; }
        .settings-section h4 { padding-bottom: 8px; margin-bottom: 12px; border-bottom: 1px solid var(--border-color); opacity: 0.9; font-weight: 700; }
        .settings-options.vertical-options { display: flex; flex-direction: column; gap: 10px; margin-top: 10px; }
        .vertical-options .settings-btn {  width: 100%; padding: 12px; text-align: right; border: 1px solid var(--border-color); border-radius: 8px; background: transparent; transition: all 0.2s ease; color: var(--primary-text-color); text-shadow: 0 0 4px rgba(0, 0, 0, 0.7); }
        [dir="ltr"] .vertical-options .settings-btn { text-align: left; }
        .vertical-options .settings-btn:hover { border-color: var(--accent-color); background: var(--primary-bg); }
        .vertical-options .settings-btn.active { border-color: var(--accent-color); background-color: var(--glass-bg); font-weight: bold; color: var(--accent-color); text-shadow: 0 0 8px var(--accent-glow); }
        #theme-switcher { display: flex; flex-direction: column; gap: 10px; margin-top: 10px; }
        .theme-btn { display: flex; align-items: center; gap: 12px; padding: 10px; background-color: var(--glass-bg); color: var(--primary-text-color); border: 1px solid transparent; border-radius: 8px; width: 100%; font-size: 1rem; cursor: pointer; transition: all 0.2s ease; }
        .theme-btn:hover { border-color: var(--accent-color); background: var(--primary-bg); }
        .theme-btn.active { border-color: var(--accent-color); font-weight: bold; }
        .theme-swatch { width: 20px; height: 20px; border-radius: 50%; flex-shrink: 0; }
        #privacy-modal .modal-content { background: transparent; box-shadow: none; border: none; max-width: 600px; text-align: center;}
        #privacy-modal h3 { font-size: 1.6rem; text-shadow: 0 0 10px var(--accent-glow); }
        #privacy-modal p { line-height: 1.7; opacity: 0.9; margin-bottom: 15px; text-shadow: 0 1px 5px rgba(0,0,0,0.8); }
        .rating-stars { font-size: 2rem; color: var(--accent-color); padding: 20px 0; cursor: pointer; }
        .rating-stars i { margin: 0 3px; transition: transform 0.2s ease, color 0.2s; }
        .rating-stars i:hover { transform: scale(1.2); }
        #blog-modal .modal-content { display: flex; flex-direction: column; }
        #blog-textarea { width: 100%; height: 250px; background-color: var(--primary-bg); border: 1px solid var(--border-color); color: var(--primary-text-color); border-radius: 8px; padding: 15px; font-size: 1rem; resize: vertical; margin-top: 15px; transition: all 0.3s ease; }
        #blog-textarea:focus { outline: none; border-color: var(--accent-color); box-shadow: 0 0 10px var(--accent-glow); }
        .blog-actions { display: flex; justify-content: space-between; align-items: center; margin-top: 15px; }
        #char-counter { font-size: 0.8rem; opacity: 0.7; }
        #save-blog-btn { padding: 8px 25px; background: var(--accent-color); color: #05080f; border: none; border-radius: 50px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        #save-blog-btn:hover { background: var(--accent-hover); transform: scale(1.05); }
        #save-blog-btn.saved { background-color: #28a745; }
        #timer-container { text-align: center; max-width: 380px; }
        #timer-display { font-family: 'Orbitron', sans-serif; font-size: 3.5rem; font-weight: 700; color: var(--accent-color); text-shadow: 0 0 20px var(--accent-glow); margin: 20px 0; }
        #timer-controls { display: flex; justify-content: center; gap: 20px; }
        #timer-controls button { padding: 12px 30px; font-size: 1.1rem; font-weight: 600; border: 2px solid var(--border-color); color: var(--primary-text-color); background: transparent; border-radius: 50px; cursor: pointer; transition: all 0.3s ease; min-width: 120px; }
        #timer-controls button:hover { border-color: var(--accent-color); color: var(--accent-color); }
        #timer-controls button#start-pause-timer-btn.running { background: var(--accent-color); color: #05080f; border-color: var(--accent-color); }
        .timer-animate-start { animation: timerPulseEffect 0.5s ease-in-out; }
        .timer-animate-reset { animation: timerResetEffect 0.4s ease-in-out; }
        @keyframes timerPulseEffect { 50% { transform: scale(1.05); text-shadow: 0 0 30px var(--accent-glow); } }
        @keyframes timerResetEffect { 50% { opacity: 0.4; } }
        #points-notification { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: transparent; color: var(--accent-color); font-size: 3.5rem; font-weight: 700; z-index: 2000; opacity: 0; pointer-events: none; text-shadow: 0 0 10px var(--accent-glow), 0 0 20px var(--accent-glow), 0 0 45px #fff; }
        #points-notification.show { animation: cinematic-points 2.2s ease-out forwards; }
        @keyframes cinematic-points { 0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); } 20% { opacity: 1; transform: translate(-50%, -60%) scale(1.1); } 80% { opacity: 1; transform: translate(-50%, -65%) scale(1.1); } 100% { opacity: 0; transform: translate(-50%, -75%) scale(1.2); } }
        #lecture-content-modal .modal-content, #courses-locked-modal .modal-content { background: transparent; box-shadow: none; border: none; text-align: center; }
        #courses-locked-message { font-size: 1.5rem; font-weight: 600; line-height: 1.7; text-shadow: 0 2px 10px rgba(0,0,0,0.9); max-width: 480px; }
        #courses-locked-message .highlight { color: var(--accent-color); font-weight: 700; font-family: 'Orbitron', sans-serif; text-shadow: 0 0 15px var(--accent-glow); }
        .dev-credit-modal { margin-top: 25px; font-family: 'Orbitron', sans-serif; font-size: 1.1rem; color: var(--accent-hover); text-shadow: 0 0 8px var(--accent-glow), 0 1px 4px #000; opacity: 0.9; }
        
        #points-info-content { text-align: center; max-width: 450px; }
        #points-info-content p { font-size: 1.2rem; font-weight: 600; line-height: 1.7; text-shadow: 0 0 15px rgba(0,0,0,0.7); margin-bottom: 15px; }
        #points-info-content .highlight { color: var(--accent-color); font-weight: 700; font-family: 'Orbitron', sans-serif; }
        #lecture-content { line-height: 1.9; text-shadow: 0 2px 10px rgba(0,0,0,0.9); padding: 0 15px; }
        #lecture-content h3 { color: var(--accent-color); margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color); font-size: 1.8rem; text-shadow: 0 0 15px var(--accent-glow), 0 0 5px rgba(0,0,0,0.7); }
        #lecture-content h4 { color: var(--primary-text-color); opacity: 0.95; margin-top: 20px; margin-bottom: 10px; font-size: 1.3rem; font-weight: 700; }
        #lecture-content p { opacity: 0.9; margin-bottom: 15px; font-size: 1.1rem; }
        #video-player-modal .modal-content { background: var(--secondary-bg); box-shadow: 0 0 25px rgba(0,0,0,0.5); border: 1px solid var(--border-color); max-width: 800px; padding: 20px; }
        #video-player-container { position: relative; width: 100%; height: 0; padding-bottom: 56.25%; }
        #video-player-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; border-radius: 8px; }

        /* --- تنسيق السهم المتحرك --- */
        #pointing-arrow {
            position: fixed;
            z-index: 2000;
            color: var(--accent-color);
            font-size: 2.5rem;
            text-shadow: 0 0 15px var(--accent-glow);
            opacity: 0;
            pointer-events: none;
            transform: translateX(-50%); /* للتوسيط الأفقي */
            transition: opacity 0.4s ease; /* الانتقال عند الإظهار والإخفاء فقط */
        }
        #pointing-arrow.show {
            opacity: 1;
        }
        #pointing-arrow.pointing-animation {
            animation: point-pulse 1.5s infinite ease-in-out;
        }
        @keyframes point-pulse {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(10px); }
        }
        
        /* === الجزء المُعدل === */
        /* حركة ظهور البطاقات الجديدة */
        @keyframes fadeInUpCard {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* --- تنسيق عرض المواد على الشاشات الكبيرة --- */
        @media (min-width: 768px) {
            #courses-container {
                /* استخدام Flexbox لتوسيط العناصر بمرونة */
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                gap: 25px; /* مسافة واضحة بين البطاقات المضيئة */
                max-width: 800px; /* تحديد عرض أقصى للحاوية */
                margin: 0 auto; /* توسيط الحاوية في الصفحة */
            }

            .course-card {
                width: 300px; /* عرض أكبر للبطاقة على الشاشات الكبيرة */
                max-width: 300px;
                
                /* التأثير المضيء */
                box-shadow: 0 0 15px -2px var(--accent-glow);
                border: 1px solid var(--border-color); /* إعادة الإطار ليتناسب مع التوهج */
                border-radius: 12px; /* إعادة الحواف الدائرية */
                transition: transform 0.3s ease, box-shadow 0.3s ease; /* حركة ناعمة للتأثيرات */
                
                /* تطبيق حركة الظهور التدريجي */
                animation: fadeInUpCard 0.6s forwards;
            }
            
            .course-card:hover {
                 /* تكثيف التوهج ورفع البطاقة عند التمرير */
                transform: translateY(-5px) scale(1.03);
                box-shadow: 0 0 25px 0px var(--accent-color);
            }
        }
        /* === نهاية الجزء المُعدل === */

        /* Media Queries for Responsive Design */
        @media (max-width: 480px) { #welcome-message-name { font-size: 1rem; } #welcome-message-details { font-size: 0.8rem; } .institute-name { font-size: 0.9rem; } #points-notification { font-size: 2.8rem; } }
        @media (max-width: 360px) { .nav-item span { font-size: 0.6rem; } #timer-display { font-size: 2.8rem; } #timer-controls button { padding: 10px 20px; font-size: 1rem; min-width: 100px; } .header-content { padding: 0 10px; } #welcome-message-name { font-size: 0.9rem; } #welcome-message-details { font-size: 0.75rem; } }
    </style>
</head>
<body>
    <div class="animated-bg">
        <canvas id="login-animation-canvas"></canvas>
        <div class="glow-element" id="glow1"></div>
        <div class="glow-element" id="glow2"></div>
    </div>
    
    <div id="loading-page" class="page">
        <p class="loading-text" data-key="loading_text">متنساش تصلي علي النبي</p>
        <div class="loading-bar-container"><div class="loading-bar"></div></div>
    </div>
    
    <div id="login-page" class="page">
        <div class="auth-choice-container" id="auth-choice-view">
            <div class="login-header">
                <img src="https://i.postimg.cc/BnLgYqwX/IMG-20250414-WA0047-1.jpg" alt="Mora Logo">
                <p class="welcome-text">Welcome to Mora for Studying</p>
            </div>
            <button class="auth-btn" id="create-account-choice-btn" data-key="create_account_btn">إنشاء حساب</button>
            <button class="auth-btn" id="login-choice-btn" data-key="login_choice_btn">تسجيل الدخول</button>
        </div>

        <div class="auth-view" id="create-account-view">
            <button class="back-to-choice-btn" title="رجوع"><i class="fas fa-arrow-right"></i></button>
            <form id="create-account-form" class="auth-form" novalidate>
                <h1 class="auth-title" data-key="create_account_title">إنشاء حساب جديد</h1>
                <div class="input-group">
                    <input type="text" id="create-name" required placeholder=" ">
                    <label for="create-name" data-key="name_placeholder">ادخل اسمك</label>
                </div>
                <div class="input-group">
                    <select id="year" required>
                        <option value="" disabled selected data-key="year_placeholder">الفرقة</option>
                        <option value="1" data-key="year_1">الأولى</option>
                        <option value="2" data-key="year_2">الثانية</option>
                        <option value="3" data-key="year_3">الثالثة</option>
                        <option value="4" data-key="year_4">الرابعة</option>
                    </select>
                </div>
                <div class="input-group">
                    <select id="major" required>
                        <option value="" disabled selected data-key="major_placeholder">اختر الفرقة أولاً...</option>
                    </select>
                </div>
                <div class="input-group">
                    <select id="semester" required>
                        <option value="1" data-key="semester_1">الفصل الدراسي الأول</option>
                        <option value="2" data-key="semester_2">الفصل الدراسي الثاني</option>
                    </select>
                </div>
                <div class="input-group">
                    <div class="password-wrapper">
                         <input type="password" id="create-password" required minlength="8" placeholder=" " autocomplete="new-password"/>
                         <label for="create-password" data-key="password_label">كلمة السر</label>
                         <i class="fas fa-eye password-toggle"></i>
                    </div>
                </div>
                <p class="password-hint" data-key="password_format_hint">يجب أن لا تقل عن 8 حروف وتحتوي على أحرف وأرقام.</p>
                
                <div class="captcha-container-numeric">
                    <canvas id="captcha-canvas" width="120" height="40"></canvas>
                    <button type="button" id="captcha-refresh-btn" title="تحديث الرمز"><i class="fas fa-sync-alt"></i></button>
                    <div class="input-group">
                        <input type="text" id="captcha-input" required placeholder=" " autocomplete="off">
                        <label for="captcha-input" data-key="captcha_enter_code">أدخل الرمز</label>
                    </div>
                </div>
                <div id="semester-warning"></div>
                 <button type="submit" form="create-account-form" class="submit-btn" data-key="register_btn">سجل الآن</button>
            </form>
        </div>
        
        <div class="auth-view" id="login-view">
             <button class="back-to-choice-btn" title="رجوع"><i class="fas fa-arrow-right"></i></button>
             <form id="login-form" class="auth-form" novalidate>
                 <h1 class="auth-title" data-key="login_title_main">تسجيل الدخول</h1>
                 <div class="input-group">
                     <input type="text" id="login-name" required placeholder=" " readonly>
                     <label for="login-name" data-key="name_placeholder">الاسم</label>
                 </div>
                 <div class="input-group">
                     <div class="password-wrapper">
                         <input type="password" id="login-password" required placeholder=" "/>
                         <label for="login-password" data-key="password_label">كلمة السر</label>
                         <i class="fas fa-eye password-toggle"></i>
                     </div>
                     <div id="password-suggestion-container"></div>
                 </div>
                  <button type="submit" form="login-form" class="submit-btn" data-key="login_btn_main">دخول</button>
             </form>
        </div>
    </div>
    
    <div id="auth-message"></div>

    <div id="main-page" class="page">
        <div class="scrolling-banner">
            <p>شكر خاص وتقدير لإدارة المعهد وأعضاء هيئة التدريس على دعمهم المتواصل وجهودهم المبذولة في سبيل عمل هذا التطبيق التعليمي.</p>
        </div>
        <header id="main-header">
            <div id="points-counter">
                <i class="fas fa-star"></i>
                <span id="points-display">0</span>
            </div>
            <div class="header-content">
                <p id="welcome-message-name"></p>
                <p id="welcome-message-details"></p>
            </div>
            <img src="https://i.postimg.cc/gjS04rJw/IMG-20250414-WA0047.jpg" alt="App Logo" id="app-logo">
        </header>
        <div id="view-wrapper">
            <div id="courses-container"></div>
            <div id="details-view">
                <div id="details-header"><button id="back-to-courses-btn" title="Back"><i class="fas fa-arrow-right"></i></button><h3 id="details-view-title"></h3></div>
                <div id="details-view-list"></div>
            </div>
        </div>
        <nav id="bottom-nav">
            <div class="nav-group">
                <button class="nav-item" id="pdf-btn"><i class="fas fa-file-pdf"></i><span data-key="nav_pdf">كتب</span></button>
                <button class="nav-item" id="sections-btn"><i class="fas fa-layer-group"></i><span data-key="nav_sections">السكاشن</span></button>
                <button class="nav-item" data-modal="ai-modal"><i class="fas fa-robot"></i><span data-key="nav_ai">AI</span></button>
                <button class="nav-item" id="platform-btn"><i class="fas fa-university"></i><span data-key="nav_platform">المنصة</span></button>
                <button class="nav-item" id="courses-btn"><i id="courses-icon" class="fas fa-lock"></i><span data-key="nav_courses">كورسات</span></button>
                <button class="nav-item" data-modal="about-modal"><i class="fas fa-info-circle"></i><span data-key="nav_about">عنا</span></button>
                <button class="nav-item" data-modal="settings-modal"><i class="fas fa-sliders-h"></i><span data-key="nav_settings">الإعدادات</span></button>
            </div>
        </nav>
    </div>
    <div id="points-notification">+9 نقاط</div>
    <div id="settings-modal" class="modal-overlay"><div class="modal-content"><button class="close-btn">×</button><h3 data-key="settings_title">الإعدادات</h3><div class="settings-section"><h4 data-key="settings_lang">اللغة</h4><div class="settings-options vertical-options" id="lang-switcher"><button class="settings-btn" data-lang="ar">العربية</button><button class="settings-btn" data-lang="en">English</button></div></div><div class="settings-section"><h4 data-key="settings_theme">الثيم اللوني</h4><div id="theme-switcher"></div></div><div class="settings-section"><h4 data-key="settings_mode">الوضع</h4><div class="settings-options vertical-options" id="mode-switcher"><button class="settings-btn" data-mode="mode-dark" data-key="mode_dark">داكن</button><button class="settings-btn" data-mode="mode-light" data-key="mode_light">فاتح</button><button class="settings-btn" data-mode="mode-oled" data-key="mode_oled">ليلي</button><button class="settings-btn" data-mode="mode-gold-black" data-key="mode_gold_black">ذهبي</button></div></div></div></div>
    <div id="privacy-modal" class="modal-overlay"><div class="modal-content"><bu
